model:
  num_experts: 8  # Decoder专家数 (Config C: Heavy - 非对称设计)
  top_k: 3
  backbone: presnet34
  encoder:
    use_encoder_idx: [0, 1, 2]
    in_channels:
    - 128
    - 256
    - 512
    expansion: 0.5
    num_encoder_layers: 1
  pretrained_weights: pretrained/rtdetrv2_r34vd_120e_coco_ema.pth
  num_decoder_layers: 4
  hidden_dim: 256
  num_queries: 100
  dset:
    token_keep_ratio: {0: 0.9, 1: 0.7, 2: 0.5}
    token_pruning_warmup_epochs: 10
    patch_moe_num_experts: 4  # Encoder专家数 (Config C: Heavy - 非对称设计，Encoder保持4个省显存)
    patch_moe_top_k: 2
    patch_moe_patch_size: 4
    use_token_pruning_loss: true
    token_pruning_loss_weight: 0.01
training:
  epochs: 200
  batch_size: 16
  warmup_epochs: 3
  pretrained_lr: 1e-5
  new_lr: 1e-4
  eta_min: 1e-6
  weight_decay: 0.0001
  ema_decay: 0.9999
  clip_max_norm: 10.0
  scheduler: cosine
  early_stopping_patience: 0
  early_stopping_metric: mAP_0.5_0.95
  seed: 42
  deterministic: false
  decoder_moe_balance_weight: 0.05
  encoder_moe_balance_weight: 0.03
data:
  data_root: /root/autodl-fs/datasets/DAIR-V2X
checkpoint:
  resume_mode: auto
  log_dir: logs
misc:
  device: cuda
  num_workers: 4
  pin_memory: true
data_augmentation:
  brightness: 0.15
  contrast: 0.15
  saturation: 0.1
  hue: 0.05
  crop_min: 0.1
  crop_max: 1.0
  flip_prob: 0.5
